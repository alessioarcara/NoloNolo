(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[14],{102:function(t,e,n){"use strict";var a=n(3),c=n(96),r=n.n(c),i=(n(121),n(103),n(126)),o=n(0),s=n(131),l=n(1);Object(c.registerLocale)("it",i.a);e.a=function(t){var e=t.minDate,n=t.start,c=t.end,i=t.onChangeStartDate,d=t.onChangeEndDate,u=t.monthsShown,b=t.alreadyRentedDates,m=Object(o.useMemo)((function(){var t=[];return b&&b.forEach((function(e){for(var n=new Date(e.from),a=new Date(e.to),c=n;c<=a;c=Object(s.default)(c,1))t.push(c)})),t}),[b]);return Object(l.jsx)(r.a,{locale:"it",wrapperClassName:"input-container",minDate:e&&e,selected:n,startDate:n,endDate:c,onChange:function(t){var e=Object(a.a)(t,2),n=e[0],c=e[1];i(n),d(c)},monthsShown:u,calendarStartDay:1,selectsRange:!0,inline:!0,excludeDates:m})}},103:function(t,e,n){},107:function(t,e,n){"use strict";var a=n(80),c=n(82),r=n(102),i=n(109),o=n.n(i),s=n(1);e.a=function(t){var e=t.minDate,n=t.moveClickHandler,i=t.changeStartDateHandler,l=t.changeEndDateHandler,d=t.searchClickHandler,u=t.cancelSelectionHandler,b=t.startDate,m=t.endDate,j=t.skipTextButton,f=t.confirmTextButton,_=t.alreadyRentedDates;return Object(s.jsxs)("div",{className:o.a["datepicker-container"],children:[Object(s.jsxs)("div",{className:o.a["header-datepicker"],children:[Object(s.jsx)(a.a,{actionClassName:o.a["actions-top"],firstButtonClassName:"btn ".concat(o.a["btn-back"]),firstButtonClickHandler:n,firstButtonText:Object(s.jsx)(c.a,{}),secondButtonClassName:"btn btn-secondary ".concat(o.a["btn-cancel"]),secondButtonClickHandler:u,secondButtonText:"Cancella"}),Object(s.jsxs)("ul",{className:o.a["days-text"],children:[Object(s.jsx)("li",{children:"lun"}),Object(s.jsx)("li",{children:"mar"}),Object(s.jsx)("li",{children:"mer"}),Object(s.jsx)("li",{children:"gio"}),Object(s.jsx)("li",{children:"ven"}),Object(s.jsx)("li",{children:"sab"}),Object(s.jsx)("li",{children:"dom"})]})]}),Object(s.jsx)("div",{className:o.a["day-picker"],children:Object(s.jsx)(r.a,{minDate:e,start:b,end:m,monthsShown:2,onChangeStartDate:i,onChangeEndDate:l,alreadyRentedDates:_})}),Object(s.jsx)(a.a,{actionClassName:(j||f)&&o.a["actions-bottom"],firstButtonClassName:j?"btn btn-secondary ".concat(o.a["btn-skip"]):o.a.hide,firstButtonClickHandler:j&&d,firstButtonText:j&&j,secondButtonClassName:f?"btn btn-outline-primary":o.a.hide,secondButtonClickHandler:f&&d,secondButtonText:f,secondButtonDisabled:!b||!m||b.getTime()===m.getTime()})]})}},109:function(t,e,n){t.exports={"datepicker-container":"SelectDates_datepicker-container__2CEui",hide:"SelectDates_hide__2pWwh","header-datepicker":"SelectDates_header-datepicker__1wQlw","btn-cancel":"SelectDates_btn-cancel__3cZ2Q","days-text":"SelectDates_days-text__3KDIa","actions-top":"SelectDates_actions-top__37iWM","actions-bottom":"SelectDates_actions-bottom__1AKcx","btn-back":"SelectDates_btn-back__11LuK","btn-skip":"SelectDates_btn-skip__2Wdyl","day-picker":"SelectDates_day-picker__2qrWC"}},110:function(t,e,n){"use strict";n.d(e,"b",(function(){return r}));var a=n(7),c=n(24),r={startDate:null,endDate:null,city:"",region:"",isNextPage:!1};e.a=function(t,e){var n=e.type,i=e.payload;switch(n){case c.s:return Object(a.a)(Object(a.a)({},t),{},{isNextPage:!t.isNextPage,city:i.city,region:i.region});case c.c:return Object(a.a)(Object(a.a)({},t),{},{startDate:i});case c.b:return Object(a.a)(Object(a.a)({},t),{},{endDate:i});case c.d:return Object(a.a)(Object(a.a)({},t),{},{startDate:null,endDate:null});default:return r}}},115:function(t,e,n){t.exports={"not-found-container":"ElementsNotFound_not-found-container__3E81E","box-shadow":"ElementsNotFound_box-shadow__1uY-k",container:"ElementsNotFound_container__3PO_a","not-found-text":"ElementsNotFound_not-found-text__12TAH"}},283:function(t,e,n){t.exports={"administration-container":"WebsiteAdministration_administration-container__1fmQr","header-background":"WebsiteAdministration_header-background__2pwIE",container:"WebsiteAdministration_container__2nFOh","administration-card":"WebsiteAdministration_administration-card__3N1ZN","rentals-title":"WebsiteAdministration_rentals-title__3fFim","rentals-list-title":"WebsiteAdministration_rentals-list-title__mF3fm","exit-btn":"WebsiteAdministration_exit-btn__1XS7b","administration-title":"WebsiteAdministration_administration-title__2l44U"}},284:function(t,e,n){t.exports={"rental-container":"AdministrationRental_rental-container__jg-5X","customer-email":"AdministrationRental_customer-email__3z8vk","rental-dates":"AdministrationRental_rental-dates__3L-JM","city-name":"AdministrationRental_city-name__Gn7lk","retro-btn":"AdministrationRental_retro-btn__35kZa"}},311:function(t,e,n){"use strict";n.r(e);var a=n(3),c=n(283),r=n.n(c),i=n(85),o=n(284),s=n.n(o),l=n(69),d=n(0),u=n(73),b=n(28),m=n(7),j=n(107),f=n(110),_=n(11),h=n(24),O=n(25),x=n(9),p=n(1),k=function(t){var e=t.handleDatesModal,n=t.handleBackDateRentals,c=t.rentalId,r=t.boatId,i=t.from,o=t.to,s=Object(O.a)(!0),u=s.data,b=s.sendRequest,k=Object(d.useContext)(x.b).token,D=Object(d.useReducer)(f.a,Object(m.a)(Object(m.a)({},f.b),{},{startDate:new Date(i),endDate:new Date(o)})),v=Object(a.a)(D,2),N=v[0],g=v[1],y=Object(d.useCallback)((function(){g({type:h.d})}),[g]),C=Object(d.useCallback)((function(t){g({type:h.c,payload:t})}),[g]),w=Object(d.useCallback)((function(t){g({type:h.b,payload:t})}),[g]);return Object(d.useEffect)((function(){b({body:Object(_.body_boatRentals)({boatId:r}),token:k},(function(t){return t.boatRentals}))}),[b,k,r]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(j.a,{moveClickHandler:e,searchClickHandler:function(){e(),n(Object(_.body_backdateRental)({rentalId:c,from:Object(l.i)(N.startDate).toString(),to:Object(l.i)(N.endDate).toString()}),(function(t,e){return t.map((function(t){return t._id===c?e:t}))}))},confirmTextButton:"Conferma",cancelSelectionHandler:y,changeStartDateHandler:C,changeEndDateHandler:w,startDate:N.startDate,endDate:N.endDate,alreadyRentedDates:u})})},D=function(t){var e=t.customer,n=t.rentalId,c=t.boatId,r=t.from,i=t.to,o=t.city,m=t.handleMutationAdministrationRentals,j=Object(d.useState)(!1),f=Object(a.a)(j,2),_=f[0],h=f[1],O=Object(d.useContext)(b.b),x=Object(d.useCallback)((function(){h((function(t){return!t}))}),[]);return Object(p.jsxs)(p.Fragment,{children:[_&&Object(p.jsx)(u.a,{adapterSize:O.breakpoint,closeModalHandler:x,children:Object(p.jsx)(k,{handleDatesModal:x,handleBackDateRentals:m,rentalId:n,boatId:c,from:r,to:i})}),Object(p.jsxs)("div",{className:s.a["rental-container"],children:[Object(p.jsx)("div",{className:s.a["customer-email"],children:e.split("@")[0]}),Object(p.jsx)("div",{className:s.a["city-name"],children:o}),Object(p.jsx)("div",{className:s.a["rental-dates"],children:"\n                        ".concat(Object(l.j)(r,{day:"numeric",month:"short",year:"numeric"})," -\n                        ").concat(Object(l.j)(i,{day:"numeric",month:"short",year:"numeric"}),"\n                    ")}),Object(p.jsx)("button",{className:"".concat(s.a["retro-btn"]," btn btn-primary"),onClick:x,children:"Retrodata"})]})]})},v=n(86),N=function(t){var e,n=t.handleMutationAdministrationRentals,a=t.rentals;return e=a.length>0?a.map((function(t){return Object(p.jsx)(D,{rentalId:t._id,boatId:t.boat._id,handleMutationAdministrationRentals:n,customer:t.customer.email,from:t.from,to:t.to,city:t.boat.isDocked.city},t._id)})):Object(p.jsx)(v.a,{warningText:"Non ci sono noleggi futuri presenti!",hasBackdrop:!1}),Object(p.jsx)(p.Fragment,{children:e})},g=n(72),y=function(t){var e=t.rentals,n=t.handleMutationAdministrationRentals,a=t.logout;return Object(p.jsxs)("div",{className:r.a["administration-container"],children:[Object(p.jsx)(i.a,{textTitle:"Amministrazione",classNameHeader:r.a["header-background"],classNameTitle:r.a["administration-title"]}),Object(p.jsxs)("section",{className:r.a.container,children:[Object(p.jsxs)("div",{className:r.a["administration-card"],children:[Object(p.jsx)(i.a,{textTitle:"Noleggi futuri",classNameHeader:r.a["rentals-list-title"],classNameTitle:r.a["rentals-title"]}),Object(p.jsx)(N,{rentals:e.filter((function(t){return new Date(t.from)>new Date})),handleMutationAdministrationRentals:n})]}),Object(p.jsx)("div",{className:r.a["exit-btn"],children:Object(p.jsx)(g.a,{onClick:a,type:"button",children:"Esci"})})]})]})};e.default=function(){var t=Object(d.useState)([]),e=Object(a.a)(t,2),n=e[0],c=e[1],r=Object(O.a)(!0).sendRequest,i=Object(d.useContext)(x.b),o=i.logout,s=i.token,u=Object(d.useCallback)((function(t,e){return r({body:t,token:s},Object(l.m)(c,e))}),[r,s]);return Object(d.useEffect)((function(){r({body:_.body_rentals,token:s},(function(t){return c(t.rentals)}))}),[r,s]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(y,{rentals:n,handleMutationAdministrationRentals:u,logout:o})})}},69:function(t,e,n){"use strict";n.d(e,"p",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"k",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return u})),n.d(e,"f",(function(){return b})),n.d(e,"o",(function(){return m})),n.d(e,"c",(function(){return j})),n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return _})),n.d(e,"a",(function(){return h})),n.d(e,"h",(function(){return O})),n.d(e,"n",(function(){return x})),n.d(e,"m",(function(){return p})),n.d(e,"l",(function(){return k}));var a=n(7),c=n(77),r=void 0,i=function(t,e){var n=!1;return function(){n||(t.call(),n=!0,setTimeout((function(){n=!1}),e))}},o=function(t,e){var n;return function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){t.apply(r,c)}),e)}},s=function(t,e,n){return n<e?t.slice(e).concat(t.slice(0,n+1)):t.slice(e,n+1)},l=function(t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t)},d=function(t){return new Date(t.getTime()-60*t.getTimezoneOffset()*1e3).toISOString().split("T")[0]},u=function(t,e){return new Date(t).toLocaleDateString("it-IT",e)},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t.slice().sort((function(t,e){return new Date(t.from)-new Date(e.from)})):t.slice().sort((function(t,e){return new Date(e.from)-new Date(t.from)}))},m=function(t,e){return e?Math.round((new Date(e)-new Date(t))/864e5):0},j=function(t){return t.reduce((function(t,e){return t+e.rating}),0)/t.length},f=function(t,e,n,a,c){return parseFloat(t)*m(n,a)+parseFloat(e)+function(t,e,n){return Math.max(0,m(t,n)-m(t,e))}(n,a,c)*(2*t)},_=function(t,e){return[].concat(Object(c.a)(t),Object(c.a)(e)).reduce((function(e,n,c){return c<t.length?e[n._id]=Object(a.a)(Object(a.a)({},n),{},{isRented:!1}):new Date(n.from)<=new Date&&e[n.boat._id]&&(e[n.boat._id].isRented=!0),e}),{})},h=function(t,e){return[].concat(Object(c.a)(t),Object(c.a)(e)).reduce((function(e,n,c){return c<t.length?e[n._id]=Object(a.a)(Object(a.a)({},n),{},{rentals:[]}):e[n.boat._id]&&e[n.boat._id].rentals.push(n),e}),{})},O=function(t){return Object.values(t[Object.keys(t)])},x=function(t){return t[Object.keys(t)]},p=function(t,e,n,a){return function(c){var r=O(c);return r[0]&&t(e?function(t){return e(t,r[0])}:r[0]),n&&n(a(r[0])),r[1]}},k=function(t){return t.substring(1)}},72:function(t,e,n){"use strict";n(0);var a=n(74),c=n.n(a),r=n(26),i=n(1);e.a=function(t){var e=t.type,n=t.className,a=t.onClick,o=t.disabled,s=t.isLoading,l=t.children;return Object(i.jsx)("button",{type:e||"submit",className:n||c.a.Button,onClick:a,disabled:o,children:s?Object(i.jsx)(r.a,{}):l})}},73:function(t,e,n){"use strict";var a=n(3),c=n(0),r=n(27),i=n.n(r),o=n(76),s=n.n(o),l=n(1),d=function(t){return Object(l.jsx)("div",{className:s.a.backdrop,onClick:t.onCancel})},u=function(t){var e=t.title,n=t.children,a=t.actions,r=t.onCancel,i=t.adapterSize,o=void 0===i?"desktop":i;return Object(c.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="unset"}}),[]),"smartphone"===o?Object(l.jsx)("div",{className:s.a["modal-fullscreen"],children:n}):Object(l.jsxs)("div",{className:s.a.modal,children:[Object(l.jsx)("header",{className:s.a["modal-header"],children:Object(l.jsx)("h1",{children:e})}),Object(l.jsx)("section",{className:s.a["modal-content"],children:n}),Object(l.jsxs)("footer",{children:[a,Object(l.jsx)("span",{onClick:r,className:s.a["modal-close"],children:"\xd7"})]})]})};e.a=function(t){var e=Object(c.useState)(!0),n=Object(a.a)(e,2),r=n[0],o=n[1],s=function(){o(!1)};return r?Object(l.jsxs)(l.Fragment,{children:[i.a.createPortal(Object(l.jsx)(d,{onCancel:t.closeModalHandler||s}),document.getElementById("backdrop-root")),i.a.createPortal(Object(l.jsx)(u,{title:t.title,children:t.children,adapterSize:t.adapterSize,onCancel:t.closeModalHandler||s}),document.getElementById("overlay-root"))]}):null}},74:function(t,e,n){t.exports={Button:"Button_Button__3gFiX"}},76:function(t,e,n){t.exports={backdrop:"Modal_backdrop__3iXHD","modal-fullscreen":"Modal_modal-fullscreen__12Zdf",modal:"Modal_modal__30MRu","slide-down":"Modal_slide-down__294fH","modal-header":"Modal_modal-header__22ZUr","modal-content":"Modal_modal-content__1hFZf","modal-close":"Modal_modal-close__2Adva"}},80:function(t,e,n){"use strict";n(0);var a=n(72),c=n(81),r=n.n(c),i=n(1);e.a=function(t){var e=t.actionClassName,n=t.firstButtonClassName,c=t.firstButtonClickHandler,o=t.firstButtonText,s=t.firstButtonDisabled,l=t.secondButtonClassName,d=t.secondButtonClickHandler,u=t.secondButtonText,b=t.secondButtonDisabled,m=t.secondButtonType;return Object(i.jsxs)("div",{className:e||r.a.actions,children:[Object(i.jsx)(a.a,{className:n||r.a["btn-first"],onClick:c,disabled:s,type:"button",children:o}),Object(i.jsx)(a.a,{className:"".concat(l," ").concat(r.a["btn-second"]),onClick:d,disabled:b,type:m||"button",children:u})]})}},81:function(t,e,n){t.exports={actions:"ActionButton_actions__27dZ-","btn-first":"ActionButton_btn-first__v2NlO","btn-second":"ActionButton_btn-second__1MDkF"}},82:function(t,e,n){"use strict";var a=n(1);e.a=function(){return Object(a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"2 0 20 20",stroke:"currentColor",width:"24px",children:Object(a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}},85:function(t,e,n){"use strict";var a=n(87),c=n.n(a),r=n(2),i=n(0),o=n(1);e.a=function(t){var e=t.classNameHeader,n=t.classNameTitle,a=t.navigatePath,s=t.backElement,l=t.textTitle,d=t.optionsElement,u=t.handleOptionsElement,b=t.children,m=Object(r.h)(),j=Object(i.useCallback)((function(){m(a||-1)}),[m,a]);return Object(o.jsx)("div",{className:"".concat(c.a.wrapper," ").concat(e),children:Object(o.jsxs)("div",{className:c.a.container,children:[Object(o.jsxs)("div",{className:c.a["header-container"],children:[Object(o.jsx)("div",{className:c.a["first-element"],onClick:j,children:s}),Object(o.jsx)("h1",{className:"".concat(c.a["second-element"]," ").concat(n," title"),children:l}),Object(o.jsx)("div",{className:c.a["third-element"],onClick:u,children:d})]}),b]})})}},86:function(t,e,n){"use strict";var a=n(115),c=n.n(a),r=n(8),i=n(1);e.a=function(t){var e=t.warningText,n=t.warningTextButton,a=t.path,o=t.hasBackdrop,s=void 0===o||o;return Object(i.jsx)("div",{className:"".concat(c.a["not-found-container"]," ").concat(s?c.a["box-shadow"]:""),children:Object(i.jsxs)("div",{className:c.a.container,children:[Object(i.jsx)("div",{className:c.a["not-found-text"],children:e}),a&&Object(i.jsx)(r.b,{className:"btn btn-primary",to:a,state:{isOpenModal:!0},children:n})]})})}},87:function(t,e,n){t.exports={wrapper:"Header_wrapper__3B1Tp",container:"Header_container__3Vnol","header-container":"Header_header-container__3X5NG","first-element":"Header_first-element__1Vci_","second-element":"Header_second-element__2geBZ","third-element":"Header_third-element__204mo"}}}]);
//# sourceMappingURL=14.80efb853.chunk.js.map