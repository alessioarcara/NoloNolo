(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[15],{102:function(e,t,a){"use strict";var n=a(3),c=a(96),i=a.n(c),s=(a(121),a(103),a(126)),r=a(0),o=a(131),l=a(1);Object(c.registerLocale)("it",s.a);t.a=function(e){var t=e.minDate,a=e.start,c=e.end,s=e.onChangeStartDate,d=e.onChangeEndDate,u=e.monthsShown,b=e.alreadyRentedDates,j=Object(r.useMemo)((function(){var e=[];return b&&b.forEach((function(t){for(var a=new Date(t.from),n=new Date(t.to),c=a;c<=n;c=Object(o.default)(c,1))e.push(c)})),e}),[b]);return Object(l.jsx)(i.a,{locale:"it",wrapperClassName:"input-container",minDate:t&&t,selected:a,startDate:a,endDate:c,onChange:function(e){var t=Object(n.a)(e,2),a=t[0],c=t[1];s(a),d(c)},monthsShown:u,calendarStartDay:1,selectsRange:!0,inline:!0,excludeDates:j})}},103:function(e,t,a){},107:function(e,t,a){"use strict";var n=a(80),c=a(82),i=a(102),s=a(109),r=a.n(s),o=a(1);t.a=function(e){var t=e.minDate,a=e.moveClickHandler,s=e.changeStartDateHandler,l=e.changeEndDateHandler,d=e.searchClickHandler,u=e.cancelSelectionHandler,b=e.startDate,j=e.endDate,m=e.skipTextButton,O=e.confirmTextButton,_=e.alreadyRentedDates;return Object(o.jsxs)("div",{className:r.a["datepicker-container"],children:[Object(o.jsxs)("div",{className:r.a["header-datepicker"],children:[Object(o.jsx)(n.a,{actionClassName:r.a["actions-top"],firstButtonClassName:"btn ".concat(r.a["btn-back"]),firstButtonClickHandler:a,firstButtonText:Object(o.jsx)(c.a,{}),secondButtonClassName:"btn btn-secondary ".concat(r.a["btn-cancel"]),secondButtonClickHandler:u,secondButtonText:"Cancella"}),Object(o.jsxs)("ul",{className:r.a["days-text"],children:[Object(o.jsx)("li",{children:"lun"}),Object(o.jsx)("li",{children:"mar"}),Object(o.jsx)("li",{children:"mer"}),Object(o.jsx)("li",{children:"gio"}),Object(o.jsx)("li",{children:"ven"}),Object(o.jsx)("li",{children:"sab"}),Object(o.jsx)("li",{children:"dom"})]})]}),Object(o.jsx)("div",{className:r.a["day-picker"],children:Object(o.jsx)(i.a,{minDate:t,start:b,end:j,monthsShown:2,onChangeStartDate:s,onChangeEndDate:l,alreadyRentedDates:_})}),Object(o.jsx)(n.a,{actionClassName:(m||O)&&r.a["actions-bottom"],firstButtonClassName:m?"btn btn-secondary ".concat(r.a["btn-skip"]):r.a.hide,firstButtonClickHandler:m&&d,firstButtonText:m&&m,secondButtonClassName:O?"btn btn-outline-primary":r.a.hide,secondButtonClickHandler:O&&d,secondButtonText:O,secondButtonDisabled:!b||!j||b.getTime()===j.getTime()})]})}},109:function(e,t,a){e.exports={"datepicker-container":"SelectDates_datepicker-container__2CEui",hide:"SelectDates_hide__2pWwh","header-datepicker":"SelectDates_header-datepicker__1wQlw","btn-cancel":"SelectDates_btn-cancel__3cZ2Q","days-text":"SelectDates_days-text__3KDIa","actions-top":"SelectDates_actions-top__37iWM","actions-bottom":"SelectDates_actions-bottom__1AKcx","btn-back":"SelectDates_btn-back__11LuK","btn-skip":"SelectDates_btn-skip__2Wdyl","day-picker":"SelectDates_day-picker__2qrWC"}},110:function(e,t,a){"use strict";a.d(t,"b",(function(){return i}));var n=a(7),c=a(24),i={startDate:null,endDate:null,city:"",region:"",isNextPage:!1};t.a=function(e,t){var a=t.type,s=t.payload;switch(a){case c.s:return Object(n.a)(Object(n.a)({},e),{},{isNextPage:!e.isNextPage,city:s.city,region:s.region});case c.c:return Object(n.a)(Object(n.a)({},e),{},{startDate:s});case c.b:return Object(n.a)(Object(n.a)({},e),{},{endDate:s});case c.d:return Object(n.a)(Object(n.a)({},e),{},{startDate:null,endDate:null});default:return i}}},113:function(e,t,a){"use strict";var n=a(114),c=a.n(n),i=a(1);t.a=function(e){var t=e.children;return Object(i.jsx)("div",{className:c.a["results-layout"],children:t})}},114:function(e,t,a){e.exports={"results-layout":"BoatListLayout_results-layout__29ZwG"}},268:function(e,t,a){e.exports={"bottom-header":"RentalsHeader_bottom-header__33fQe","windows-bar":"RentalsHeader_windows-bar__3JXJB",normal:"RentalsHeader_normal__1SQBL",selected:"RentalsHeader_selected__2aFdB"}},269:function(e,t,a){e.exports={"bottom-container":"DatesModal_bottom-container__bgJYx","total-amount":"DatesModal_total-amount__2F2VM","btn-update":"DatesModal_btn-update__rqyWy"}},274:function(e,t,a){e.exports={"review-container":"ReviewModal_review-container__2eXBD","review-title":"ReviewModal_review-title__12zeB","five-stars":"ReviewModal_five-stars__34MVp",quote:"ReviewModal_quote__3f4wD",stars:"ReviewModal_stars__2_w44","review-text-container":"ReviewModal_review-text-container__3RLmN","review-text":"ReviewModal_review-text__wxejy","btn-publish":"ReviewModal_btn-publish__1vtuJ","created-at-container":"ReviewModal_created-at-container__24g9U"}},276:function(e,t,a){e.exports={"card-container":"RentalCard_card-container__2iPuy","delete-card":"RentalCard_delete-card__1ivM6","details-container":"RentalCard_details-container__2cdGz","details-section":"RentalCard_details-section__22XZo","optional-section":"RentalCard_optional-section__2QBef","delete-section":"RentalCard_delete-section__s7p1P",dates:"RentalCard_dates__3ioRj",price:"RentalCard_price__1FEHe",option:"RentalCard_option__2Oifu","btn-confirm":"RentalCard_btn-confirm__2T-rK"}},310:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(7),i=a(2),s=a(0),r=a(268),o=a.n(r),l=a(8),d=a(85),u=a(82),b=a(1),j=function(){return Object(b.jsx)(d.a,{textTitle:"Noleggi",backElement:Object(b.jsx)(u.a,{}),navigatePath:"/profile",classNameHeader:o.a["bottom-header"],children:Object(b.jsxs)("div",{className:o.a["windows-bar"],children:[Object(b.jsx)(l.c,{to:"previous",className:function(e){var t=e.isActive;return"".concat(o.a.normal)+(t?" ".concat(o.a.selected):"")},children:Object(b.jsx)("span",{children:"Passati"})}),Object(b.jsx)(l.c,{to:"active",className:function(e){var t=e.isActive;return"".concat(o.a.normal)+(t?" ".concat(o.a.selected):"")},children:Object(b.jsx)("span",{children:"Attivi"})}),Object(b.jsx)(l.c,{to:"future",className:function(e){var t=e.isActive;return"".concat(o.a.normal)+(t?" ".concat(o.a.selected):"")},children:Object(b.jsx)("span",{children:"Futuri"})})]})})},m=a(25),O=a(11),_=a(9),f=a(95),v=a(69),x=a(73),h=a(28),p=a(107),D=a(24),y=a(110),w=a(269),C=a.n(w),R=a(131),k=function(e){var t=e.boatId,a=e.rentalId,i=e.start,r=e.end,o=e.dailyFee,l=e.fixedFee,d=e.onUpdateRentalDates,u=e.onGoRentalsPage,j=Object(s.useContext)(_.b).token,f=Object(s.useReducer)(y.a,Object(c.a)(Object(c.a)({},y.b),{},{startDate:new Date(i),endDate:new Date(r)})),x=Object(n.a)(f,2),h=x[0],w=x[1],k=Object(s.useCallback)((function(){w({type:D.d})}),[w]),N=Object(s.useCallback)((function(e){w({type:D.c,payload:e})}),[w]),g=Object(s.useCallback)((function(e){w({type:D.b,payload:e})}),[w]),B=Object(m.a)(!0),F=B.data,S=B.sendRequest;return Object(s.useEffect)((function(){S({body:Object(O.body_boatRentals)({boatId:t}),token:j},(function(e){return e.boatRentals}))}),[S,j,t]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p.a,{minDate:Object(R.default)(new Date,1),startDate:h.startDate,endDate:h.endDate,moveClickHandler:u,changeStartDateHandler:N,changeEndDateHandler:g,cancelSelectionHandler:k,alreadyRentedDates:F}),Object(b.jsxs)("div",{className:C.a["bottom-container"],children:[Object(b.jsx)("span",{className:C.a["total-amount"],children:h.endDate&&0!==Object(v.o)(h.startDate,h.endDate)?"Totale ".concat(Object(v.k)(Object(v.d)(o,l,h.startDate,h.endDate))):""}),Object(b.jsx)("button",{className:"".concat(C.a["btn-update"]," btn btn-outline-primary"),onClick:function(){d(Object(O.body_updateRental)({rentalId:a,from:h.startDate,to:h.endDate}),(function(e,t){return e.map((function(e){return e._id===t._id?t:e}))}))},disabled:!h.endDate||Object(v.i)(h.startDate)===Object(v.i)(h.endDate),children:"Aggiorna"})]})]})},N=a(164),g=a(274),B=a.n(g),F=a(166),S=function(e){var t=e.rentalId,a=e.review,i=e.isReviewed,r=e.onPublishReview,o=["Scadente","Non buono","Buono","Ottimo","Eccellente"],l=Object(s.useState)(),d=Object(n.a)(l,2),u=d[0],j=d[1],m=Object(s.useState)(""),_=Object(n.a)(m,2),f=_[0],x=_[1],h=Object(s.useCallback)((function(e){return j(e)}),[]),p=Object(s.useCallback)((function(e){return x(e.target.value)}),[]);return Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),r(Object(O.body_publishReview)({rentalId:t,body:f,rating:parseInt(u)+1}),(function(e,t){return e.map((function(e){return e._id===t.rental?Object(c.a)(Object(c.a)({},e),{},{boat:Object(c.a)(Object(c.a)({},e.boat),{},{reviews:e.boat.reviews.concat(t)})}):e}))}))},children:Object(b.jsxs)("div",{className:B.a["review-container"],children:[Object(b.jsx)("span",{className:B.a["review-title"],children:i?"La tua recensione":"Scrivi la tua recensione!"}),Object(b.jsxs)("div",{className:B.a["five-stars"],children:[Object(b.jsx)("span",{className:B.a.quote,children:i?"Valutata: ".concat(o[a.rating-1]):o[u]?o[u]:"Valuta questa barca"}),Object(b.jsx)("div",{className:B.a.stars,children:Object(b.jsx)(F.a,{votes:o,quoteIndex:i?a.rating-1:u,changeQuoteIndex:h,placeholder:i})})]}),Object(b.jsxs)("div",{className:B.a["review-text-container"],children:[Object(b.jsx)("span",{children:i?"Il tuo feedback:":"Lasciaci il tuo feedback:"}),Object(b.jsx)("textarea",{className:B.a["review-text"],onChange:p,value:i?a.body:f,disabled:i})]}),Object(b.jsx)("div",{className:"".concat(i?B.a["created-at-container"]:"hide"),children:Object(b.jsxs)("span",{children:["Lasciata il ",i&&Object(v.j)(new Date(+a.createdAt),{day:"numeric",month:"long",year:"numeric"})]})}),Object(b.jsx)("button",{className:"".concat(B.a["btn-publish"]," btn btn-outline-primary ").concat(i&&"hide"),disabled:!u||f.length<10,children:"Pubblica"})]})})},M=a(276),A=a.n(M),H=a(125),I=function(e){var t=e.onMutateRentals,a=e.rentalId,c=e.boatId,r=e.previous,o=e.active,l=e.future,d=e.images,u=e.from,j=e.to,m=e.city,_=e.billNumber,p=e.boatData,D=e.customer,y=e.createdAt,w=e.rentalDailyFee,C=e.rentalFixedFee,R=e.advertisementDailyFee,g=e.advertisementFixedFee,B=e.redeliveryDate,F=e.totalAmount,M=e.review,I=e.isReviewed,T=Object(s.useContext)(h.b),P=Object(i.h)(),E=Object(s.useState)(""),L=Object(n.a)(E,2),q=L[0],U=L[1],z=Object(s.useCallback)((function(e){return e.target.dataset.modal?U(e.target.dataset.modal):U("")}),[]),J=Object(s.useCallback)((function(e,a){t(e,a),U("")}),[t]),Q=Object(s.useCallback)((function(){t(Object(O.body_deleteRental)({rentalId:a}),(function(e,t){return e.filter((function(e){return e._id!==t}))}))}),[t,a]),W=Object(s.useCallback)((function(){P("/boats/".concat(c),{state:{startUrlDate:u,endUrlDate:j}})}),[P,c,u,j]);return Object(b.jsxs)(b.Fragment,{children:[""!==q&&Object(b.jsxs)(x.a,{closeModalHandler:z,adapterSize:"dates"===q&&T.breakpoint,children:["review"===q&&Object(b.jsx)(S,{rentalId:a,customerId:D._id,review:M,onPublishReview:J,isReviewed:I}),"delete"===q&&Object(b.jsx)(H.a,{text:"Eliminare questo noleggio?",onConfirm:Q}),"dates"===q&&Object(b.jsx)(k,{onUpdateRentalDates:J,boatId:c,rentalId:a,start:u,end:j,dailyFee:R,fixedFee:g,onGoRentalsPage:z}),"bill"===q&&Object(b.jsx)(N.a,{billNumber:_,from:u,to:j,boatData:p,customer:D.email,createdAt:y,dailyFee:w,fixedFee:C,redeliveryDate:B,totalAmount:F})]}),Object(b.jsxs)("div",{className:A.a["card-container"],children:[Object(b.jsx)("button",{"data-modal":"delete",className:"".concat(A.a["delete-card"]," ").concat(!l&&"hide"),onClick:z,children:"\xd7"}),Object(b.jsx)(f.a,{images:d}),Object(b.jsxs)("div",{className:A.a["details-container"],children:[Object(b.jsxs)("section",{onClick:W,className:A.a["details-section"],children:[Object(b.jsx)("span",{className:A.a.dates,children:"".concat(Object(v.j)(new Date(u),{day:"numeric",month:"short",year:"numeric"})," - ").concat(Object(v.j)(new Date(j),{day:"numeric",month:"short",year:"numeric"}))}),Object(b.jsx)("span",{className:"card-title",children:m}),Object(b.jsx)("span",{className:A.a.price,children:"Prezzo totale ".concat(Object(v.k)(F))})]}),Object(b.jsxs)("section",{className:"".concat(A.a["optional-section"]," ").concat(o&&"hide"),children:[Object(b.jsx)("button",{"data-modal":"dates",className:"".concat(A.a.option," ").concat(!l&&"hide"),onClick:z,children:"Modifica date"}),Object(b.jsx)("button",{"data-modal":"bill",className:"".concat(A.a.option," ").concat(!r&&"hide"),onClick:z,children:"Mostra fattura"}),Object(b.jsx)("button",{"data-modal":"review",className:"".concat(A.a.option," ").concat(!r&&"hide"),onClick:z,children:I?"Mostra recensione":"Lascia recensione"})]})]})]})]})},T=a(86),P=a(113),E=function(e){var t=e.onMutateRentals,a=e.previousRentals,n=e.activeRentals,c=e.futureRentals,i=e.previous,r=e.active,o=e.future,l=Object(s.useCallback)((function(){return a||n||c}),[a,n,c]),d=Object(s.useMemo)((function(){return i?"passati":r?"attivi":o?"futuri":""}),[i,r,o]);return 0===l().length?Object(b.jsx)(T.a,{warningText:"Non ci sono noleggi ".concat(d,". Inizia a noleggiare la tua barca!"),warningTextButton:"Noleggia",path:"/"}):Object(b.jsx)(P.a,{children:l().map((function(e){return Object(b.jsx)(I,{onMutateRentals:t,rentalId:e._id,boatId:e.boat._id,previous:i,active:r,future:o,from:e.from,to:e.to,redeliveryDate:e.redelivery,city:e.boat.isDocked.city,totalAmount:Object(v.d)(e.dailyFee,e.fixedFee,e.from,e.to,e.redelivery),images:e.boat.hasAdvertisement?e.boat.hasAdvertisement.images:[],billNumber:e.billNumber,boatData:e.boat,customer:e.customer,createdAt:e.createdAt,rentalDailyFee:e.dailyFee,rentalFixedFee:e.fixedFee,advertisementDailyFee:e.boat.hasAdvertisement?e.boat.hasAdvertisement.dailyFee:0,advertisementFixedFee:e.boat.hasAdvertisement?e.boat.hasAdvertisement.fixedFee:0,review:e.boat.reviews.filter((function(t){return t.rental===e._id&&t.creator._id===e.customer._id}))[0],isReviewed:e.isReviewed},e._id)}))})};t.default=function(){var e=Object(s.useContext)(_.b).token,t=Object(i.i)(),a=Object(s.useState)([]),r=Object(n.a)(a,2),o=r[0],l=r[1],d=Object(m.a)(!0).sendRequest,u=Object(s.useMemo)((function(){return function(e){return{previous:e?e.reduce((function(e,t){return t.redelivery&&e.push(t.boat.reviews.some((function(e){return e.rental===t._id&&e.creator._id===t.customer._id}))?Object(c.a)(Object(c.a)({},t),{},{isReviewed:!0}):Object(c.a)(Object(c.a)({},t),{},{isReviewed:!1})),e}),[]):[],active:e?e.filter((function(e){return new Date(e.from)<=new Date&&!e.redelivery})):[],future:e?e.filter((function(e){return new Date(e.from)>new Date})):[]}}(o)}),[o]),f=Object(s.useCallback)((function(t,a){return d({body:t,token:e},Object(v.m)(l,a))}),[d,e]);return Object(s.useEffect)((function(){d({body:O.body_userRentals,token:e},(function(e){return l(e.rentalsByUser)}))}),[d,e]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(j,{}),Object(b.jsxs)(i.e,{children:[Object(b.jsx)(i.c,{path:"previous",element:Object(b.jsx)(E,{onMutateRentals:f,previousRentals:u.previous,previous:!0})}),Object(b.jsx)(i.c,{path:"active",element:Object(b.jsx)(E,{activeRentals:u.active,active:!0})}),Object(b.jsx)(i.c,{path:"future",element:Object(b.jsx)(E,{onMutateRentals:f,futureRentals:u.future,future:!0})}),Object(b.jsx)(i.c,{path:"/",element:"PUSH"===t?Object(b.jsx)(i.a,{to:"active"}):Object(b.jsx)(i.a,{to:"/profile"})})]})]})}},72:function(e,t,a){"use strict";a(0);var n=a(74),c=a.n(n),i=a(26),s=a(1);t.a=function(e){var t=e.type,a=e.className,n=e.onClick,r=e.disabled,o=e.isLoading,l=e.children;return Object(s.jsx)("button",{type:t||"submit",className:a||c.a.Button,onClick:n,disabled:r,children:o?Object(s.jsx)(i.a,{}):l})}},74:function(e,t,a){e.exports={Button:"Button_Button__3gFiX"}},80:function(e,t,a){"use strict";a(0);var n=a(72),c=a(81),i=a.n(c),s=a(1);t.a=function(e){var t=e.actionClassName,a=e.firstButtonClassName,c=e.firstButtonClickHandler,r=e.firstButtonText,o=e.firstButtonDisabled,l=e.secondButtonClassName,d=e.secondButtonClickHandler,u=e.secondButtonText,b=e.secondButtonDisabled,j=e.secondButtonType;return Object(s.jsxs)("div",{className:t||i.a.actions,children:[Object(s.jsx)(n.a,{className:a||i.a["btn-first"],onClick:c,disabled:o,type:"button",children:r}),Object(s.jsx)(n.a,{className:"".concat(l," ").concat(i.a["btn-second"]),onClick:d,disabled:b,type:j||"button",children:u})]})}},81:function(e,t,a){e.exports={actions:"ActionButton_actions__27dZ-","btn-first":"ActionButton_btn-first__v2NlO","btn-second":"ActionButton_btn-second__1MDkF"}}}]);
//# sourceMappingURL=15.21163871.chunk.js.map