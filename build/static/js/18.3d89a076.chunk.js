(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[18],{139:function(e,t,a){"use strict";var n=a(3),i=a(140),r=a.n(i),c=a(0),s=a(1);t.a=function(e){var t=e.text,a=e.children,i=e.isShownTooltip,o=void 0!==i&&i,d=e.positionTop,l=void 0===d||d,u=Object(c.useState)(!1),j=Object(n.a)(u,2),m=j[0],b=j[1],v=Object(c.useCallback)((function(){b(!0)}),[]),h=Object(c.useCallback)((function(){b(!1)}),[]);return o?Object(s.jsxs)("div",{className:r.a["tooltip-wrapper"],children:[m&&Object(s.jsx)("div",{className:"".concat(r.a.container," ").concat(l?r.a["position-top"]:r.a["position-left"]),children:Object(s.jsx)("div",{className:r.a["tooltip-container"],children:t})}),Object(s.jsx)("div",{onMouseEnter:v,onMouseLeave:h,children:a})]}):a}},140:function(e,t,a){e.exports={"tooltip-wrapper":"Tooltip_tooltip-wrapper__3RJDR",container:"Tooltip_container__Kci_B","position-top":"Tooltip_position-top__1n9jo","position-bottom":"Tooltip_position-bottom__1JeHp","position-right":"Tooltip_position-right__3_-tf","position-left":"Tooltip_position-left__kjnV0","tooltip-container":"Tooltip_tooltip-container__1MFAQ"}},277:function(e,t,a){e.exports={"card-container":"AdvertisementAdministrationCard_card-container__253LL","delete-card":"AdvertisementAdministrationCard_delete-card__3M-Q5","details-container":"AdvertisementAdministrationCard_details-container__h_1ic","details-section":"AdvertisementAdministrationCard_details-section__17qeJ","option-section":"AdvertisementAdministrationCard_option-section__1GRvQ","card-header":"AdvertisementAdministrationCard_card-header__1LHhZ","average-reviews-container":"AdvertisementAdministrationCard_average-reviews-container__2648c","grid-elements":"AdvertisementAdministrationCard_grid-elements__3yzMa","eye-icon":"AdvertisementAdministrationCard_eye-icon__3KmXe","point-green-icon":"AdvertisementAdministrationCard_point-green-icon__3pZvs","hourglass-icon":"AdvertisementAdministrationCard_hourglass-icon__3XpKv",date:"AdvertisementAdministrationCard_date__2ckzx",parameter:"AdvertisementAdministrationCard_parameter__1nzbi","modal-header":"AdvertisementAdministrationCard_modal-header__2w0MN"}},278:function(e,t,a){e.exports={"modal-header-container":"DetailsModalHeader_modal-header-container__1tYwR","header-container":"DetailsModalHeader_header-container__1DPLP","state-item":"DetailsModalHeader_state-item__1ToNc",active:"DetailsModalHeader_active__1wsPL"}},279:function(e,t,a){e.exports={container:"PreviousRentalCard_container__1BekQ","customer-email":"PreviousRentalCard_customer-email__1n6Sm","stars-container":"PreviousRentalCard_stars-container__10D_l",date:"PreviousRentalCard_date__6L4l2","bill-btn":"PreviousRentalCard_bill-btn__2U755"}},280:function(e,t,a){e.exports={container:"ActiveRental_container__ODAcM","active-container":"ActiveRental_active-container__3YWZ4","days-left":"ActiveRental_days-left__quFhf",dates:"ActiveRental_dates__3zi7r","text-style":"ActiveRental_text-style__1C7RV",email:"ActiveRental_email__29usL","close-btn":"ActiveRental_close-btn__2UI6S"}},281:function(e,t,a){e.exports={"future-container":"FutureRentalCard_future-container__3JzqQ","created-at":"FutureRentalCard_created-at__1Fhp2","total-amount":"FutureRentalCard_total-amount__3fFmE",customer:"FutureRentalCard_customer__3JsZd",date:"FutureRentalCard_date__2Y0jh"}},282:function(e,t,a){e.exports={"announcements-layout":"AnnouncementListLayout_announcements-layout__3KAr4"}},305:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(85),r=a(0),c=a(277),s=a.n(c),o=a(95),d=a(69),l=a(73),u=a(97),j=a(1),m=function(){return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_2","data-name":"Layer 2",viewBox:"0 0 500 500",children:Object(j.jsx)("path",{d:"M329.06,112.37H170.94a13.57,13.57,0,0,0-13.55,13.55v11a13.57,13.57,0,0,0,13.55,13.54h1.14v25.31a74.72,74.72,0,0,0,39.06,65.7L226.9,250l-15.76,8.57a74.72,74.72,0,0,0-39.06,65.7v25.31h-1.14a13.57,13.57,0,0,0-13.55,13.54v11a13.57,13.57,0,0,0,13.55,13.55H329.06a13.57,13.57,0,0,0,13.55-13.55v-11a13.57,13.57,0,0,0-13.55-13.54h-1.14V324.27a74.72,74.72,0,0,0-39.06-65.7L273.1,250l15.76-8.57a74.72,74.72,0,0,0,39.06-65.7V150.42h1.14a13.57,13.57,0,0,0,13.55-13.54v-11A13.57,13.57,0,0,0,329.06,112.37Zm5.55,250.75v11a5.56,5.56,0,0,1-5.55,5.55H170.94a5.56,5.56,0,0,1-5.55-5.55v-11a5.55,5.55,0,0,1,5.55-5.54H329.06A5.55,5.55,0,0,1,334.61,363.12ZM319.92,175.73A66.73,66.73,0,0,1,285,234.4l-22.23,12.09a4,4,0,0,0,0,7L285,265.6a66.73,66.73,0,0,1,34.88,58.67v25.31H180.08V324.27A66.73,66.73,0,0,1,215,265.6l22.23-12.09a4,4,0,0,0,0-7L215,234.4a66.73,66.73,0,0,1-34.88-58.67V150.42H319.92Zm14.69-38.85a5.55,5.55,0,0,1-5.55,5.54H170.94a5.55,5.55,0,0,1-5.55-5.54v-11a5.56,5.56,0,0,1,5.55-5.55H329.06a5.56,5.56,0,0,1,5.55,5.55Z"})})},b=function(){return Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"Layer_2","data-name":"Layer 2",viewBox:"0 0 500 500",children:[Object(j.jsx)("path",{d:"M415.68,247.56a315.63,315.63,0,0,0-48.26-48c-27.34-22-69.89-48.23-117.42-48.23s-90.08,26.23-117.42,48.23a315.63,315.63,0,0,0-48.26,48,4,4,0,0,0,0,4.88,315.63,315.63,0,0,0,48.26,48c27.34,22,69.89,48.23,117.42,48.23s90.08-26.23,117.42-48.23a315.63,315.63,0,0,0,48.26-48A4,4,0,0,0,415.68,247.56Zm-53.43,46.79C336,315.49,295.13,340.69,250,340.69s-86-25.2-112.25-46.34A322,322,0,0,1,92.63,250a322,322,0,0,1,45.12-44.35C164,184.51,204.86,159.31,250,159.31s86,25.2,112.25,46.34A322,322,0,0,1,407.37,250,322,322,0,0,1,362.25,294.35Z"}),Object(j.jsx)("path",{d:"M308.12,228.71a46.11,46.11,0,0,1,18,3.49,78.3,78.3,0,1,0-.72,38.18,46.32,46.32,0,0,1-17.24,3.2c-18.51,0-33.51-10.05-33.51-22.44S289.61,228.71,308.12,228.71Z"})]})},v=a(278),h=a.n(v),O=function(e){var t=e.rentalsState,a=e.setRentals;return Object(j.jsx)("div",{className:h.a["modal-header-container"],children:Object(j.jsxs)("div",{className:h.a["header-container"],children:[Object(j.jsx)("div",{className:"".concat(h.a["state-item"]," ").concat("previous"===t&&h.a.active),onClick:function(){return a("previous")},children:"Passati"}),Object(j.jsx)("div",{className:"".concat(h.a["state-item"]," ").concat("active"===t&&h.a.active),onClick:function(){return a("active")},children:"Attivo"}),Object(j.jsx)("div",{className:"".concat(h.a["state-item"]," ").concat("future"===t&&h.a.active),onClick:function(){return a("future")},children:"Futuri"})]})})},_=a(279),x=a.n(_),p=a(166),f=a(164),A=[0,1,2,3,4],g=function(e){var t=e.billNumber,a=e.start,i=e.end,c=e.boatData,s=e.createdAt,o=e.dailyFee,u=e.fixedFee,m=e.totalAmount,b=e.customer,v=e.redeliveryDate,h=e.review,O=Object(r.useState)(!1),_=Object(n.a)(O,2),g=_[0],y=_[1],w=function(){return y((function(e){return!e}))};return Object(j.jsxs)(j.Fragment,{children:[g&&Object(j.jsx)(l.a,{closeModalHandler:w,children:Object(j.jsx)(f.a,{billNumber:t,from:a,to:i,boatData:c,createdAt:s,customer:b.email,dailyFee:o,fixedFee:u,redeliveryDate:v,totalAmount:m})}),Object(j.jsxs)("div",{className:x.a.container,children:[Object(j.jsx)("div",{className:x.a["customer-email"],children:b.email.split("@")[0]}),Object(j.jsx)("div",{className:x.a["stars-container"],children:Object(j.jsx)(p.a,{votes:A,quoteIndex:h&&h.rating-1,placeholder:!0})}),Object(j.jsx)("div",{className:x.a.date,children:"\n                        ".concat(Object(d.j)(a,{day:"numeric",month:"short",year:"numeric"})," -\n                        ").concat(Object(d.j)(i,{day:"numeric",month:"short",year:"numeric"}),"\n                    ")}),Object(j.jsx)("button",{className:"".concat(x.a["bill-btn"]," btn btn-primary"),onClick:w,children:"Fattura"})]})]})},y=a(86),w=function(e){var t=e.previousRentals,a=Object(r.useMemo)((function(){return Object(d.f)(t,!0)}),[t]);return a.length>0?a.map((function(e){return Object(j.jsx)(g,{start:e.from,end:e.to,customer:e.customer,billNumber:e.billNumber,boatData:e.boat,createdAt:e.createdAt,dailyFee:e.dailyFee,fixedFee:e.fixedFee,redeliveryDate:e.redelivery,totalAmount:Object(d.d)(e.dailyFee,e.fixedFee,e.from,e.to,e.redelivery),review:e.boat.reviews.filter((function(t){return e._id===t.rental&&t.creator._id===e.customer._id}))[0]},e._id)})):Object(j.jsx)(y.a,{warningText:"Non ci sono noleggi passati...",hasBackdrop:!1})},N=a(7),C=a(280),R=a.n(C),k=function(){return Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},M=a(11),F=a(139),D=function(e){var t=e.activeRental,a=e.onMutateAdvertisement,n=Object(r.useCallback)((function(){a(Object(M.body_recordBoatReturn)({rentalId:t._id}),(function(e,t){return e.map((function(e){return e._id===t.boat._id?Object(N.a)(Object(N.a)({},e),{},{rentals:e.rentals.map((function(e){return e._id===t._id?t:e}))}):e}))}))}),[t,a]),i=Object(r.useMemo)((function(){return t&&Object(d.o)(new Date,t.to)>0}),[t]);return Object(j.jsx)("div",{className:R.a.container,children:t?Object(j.jsxs)("div",{className:R.a["active-container"],children:[Object(j.jsx)("div",{className:R.a.email,children:t.customer.email.split("@")[0]}),Object(j.jsxs)("div",{className:R.a["days-left"],children:[Object(j.jsx)(m,{}),Object(j.jsx)("div",{className:R.a["text-style"],children:"\n                                    ".concat(0!==Object(d.o)(new Date,t.to)?Math.abs(Object(d.o)(new Date,t.to)):"","\n                                    ").concat(-1===Object(d.o)(new Date,t.to)?"giorno in ritardo":Object(d.o)(new Date,t.to)<0?"giorni in ritardo":1===Object(d.o)(new Date,t.to)?"giorno al termine":0===Object(d.o)(new Date,t.to)?"terminato oggi":"giorni al termine","\n                                ")})]}),Object(j.jsxs)("div",{className:R.a.dates,children:[Object(j.jsx)(k,{}),Object(j.jsx)("div",{className:R.a["text-style"],children:"\n                                    ".concat(Object(d.j)(t.from,{day:"numeric",month:"short"})," - \n                                    ").concat(Object(d.j)(t.to,{day:"numeric",month:"short"}),"\n                                ")})]}),Object(j.jsx)(F.a,{text:"Puoi chiudere il noleggio solo dopo il termine.",isShownTooltip:i,children:Object(j.jsx)("button",{className:"".concat(R.a["close-btn"]," btn btn-primary"),disabled:i,title:"Chiudi noleggio al termine",onClick:n,children:"Chiudi"})})]}):Object(j.jsx)(y.a,{warningText:"Noleggio attivo non presente...",hasBackdrop:!1})})},L=a(281),S=a.n(L),T=function(e){var t=e.customer,a=e.createdAt,n=e.start,i=e.end,r=e.totalAmount;return Object(j.jsxs)("div",{className:S.a["future-container"],children:[Object(j.jsx)("div",{className:S.a["created-at"],children:Object(d.j)(a,{day:"numeric",month:"numeric",year:"numeric"})}),Object(j.jsx)("div",{className:S.a.customer,children:t.email.split("@")[0]}),Object(j.jsx)("span",{className:S.a.date,children:"\n                    ".concat(Object(d.j)(n,{day:"numeric",month:"short",year:"numeric"})," -\n                    ").concat(Object(d.j)(i,{day:"numeric",month:"short",year:"numeric"}),"\n                ")}),Object(j.jsx)("div",{className:S.a["total-amount"],children:Object(d.k)(r)})]})},H=function(e){var t=e.futureRentals,a=Object(r.useMemo)((function(){return Object(d.f)(t,!0)}),[t]);return a.length>0?a.map((function(e){return Object(j.jsx)(T,{customer:e.customer,createdAt:e.createdAt,start:e.from,end:e.to,totalAmount:Object(d.d)(e.dailyFee,e.fixedFee,e.from,e.to)},e._id)})):Object(j.jsx)(y.a,{warningText:"Non ci sono noleggi futuri...",hasBackdrop:!1})},B=function(e){var t=e.previousRentals,a=e.activeRental,i=e.futureRentals,c=e.onMutateAdvertisement,s=Object(r.useState)("active"),o=Object(n.a)(s,2),d=o[0],l=o[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O,{rentalsState:d,setRentals:l}),"previous"===d&&Object(j.jsx)(w,{previousRentals:t}),"active"===d&&Object(j.jsx)(D,{activeRental:a[0],onMutateAdvertisement:c}),"future"===d&&Object(j.jsx)(H,{futureRentals:i})]})},z=a(2),P=a(125),Z=function(e){var t=e.boatId,a=e.model,i=e.reviews,c=e.createdAt,v=e.images,h=e.rentals,O=e.preferredBy,_=e.onMutateAdvertisement,x=Object(r.useState)(""),p=Object(n.a)(x,2),f=p[0],A=p[1],g=Object(r.useCallback)((function(e){return e.target.dataset.modal?A(e.target.dataset.modal):A("")}),[]),y=Object(z.h)(),w=Object(z.g)(),N=Object(r.useCallback)((function(){y("/boats/".concat(t),{state:{from:w}})}),[y,w,t]),C=Object(r.useMemo)((function(){return{previous:h.filter((function(e){return e.redelivery})),active:h.filter((function(e){return new Date(e.from)<=new Date&&!e.redelivery})),future:h.filter((function(e){return new Date(e.from)>new Date}))}}),[h]),R=Object(r.useCallback)((function(){_(Object(M.body_withdrawAdvertisement)({boatId:t}),(function(e,t){return e.filter((function(e){return e._id!==t}))}))}),[_,t]);return Object(j.jsxs)(j.Fragment,{children:[""!==f&&Object(j.jsxs)(l.a,{closeModalHandler:g,children:["details"===f&&Object(j.jsx)(B,{onMutateAdvertisement:_,previousRentals:C.previous,activeRental:C.active,futureRentals:C.future}),"delete"===f&&Object(j.jsx)(P.a,{text:"Sicuro di eliminare questo annuncio?",onConfirm:R})]}),Object(j.jsxs)("div",{className:s.a["card-container"],children:[Object(j.jsx)("div",{className:s.a["delete-card"],"data-modal":"delete",onClick:g,children:"\xd7"}),Object(j.jsx)(o.a,{images:v}),Object(j.jsxs)("div",{className:s.a["details-container"],children:[Object(j.jsxs)("div",{className:s.a["details-section"],onClick:N,children:[Object(j.jsxs)("div",{className:s.a["card-header"],children:[Object(j.jsx)("span",{className:"card-title",children:a}),Object(j.jsxs)("div",{className:s.a["average-reviews-container"],children:[Object(j.jsx)(u.a,{}),Object(j.jsx)("span",{children:i.length>0&&Object(d.c)(i)}),Object(j.jsx)("span",{children:"(".concat(i.length,")")})]})]}),Object(j.jsxs)("div",{children:["Creato il: ",Object(j.jsx)("span",{className:s.a.date,children:Object(d.j)(c,{month:"short",year:"numeric"})})]}),Object(j.jsxs)("div",{children:["Prenotazioni future: ",Object(j.jsx)("span",{className:s.a.parameter,children:C.future.length})]}),Object(j.jsxs)("div",{className:s.a["grid-elements"],children:[Object(j.jsx)("div",{className:s.a["eye-icon"],children:Object(j.jsx)(b,{})}),Object(j.jsxs)("div",{children:["Osservato da: ",Object(j.jsxs)("span",{className:s.a.parameter,children:[O," persone"]})]})]}),C.active[0]?Object(j.jsxs)("div",{className:s.a["grid-elements"],children:[Object(j.jsx)("div",{className:s.a["hourglass-icon"],children:Object(j.jsx)(m,{})}),Object(j.jsxs)("div",{children:["Attualmente noleggiato da: ",Object(j.jsx)("span",{className:s.a.parameter,children:C.active[0].customer.email.split("@")[0]})]})]}):Object(j.jsxs)("div",{className:s.a["grid-elements"],children:[Object(j.jsx)("div",{className:s.a["point-green-icon"]}),Object(j.jsx)("div",{children:"Attualmente disponibile"})]})]}),Object(j.jsx)("div",{className:s.a["option-section"],"data-modal":"details",onClick:g,children:"Visualizza noleggi"})]})]})]})},V=a(282),I=a.n(V),J=function(e){var t=e.children;return Object(j.jsx)("div",{className:I.a["announcements-layout"],children:t})},q=function(e){var t=e.advertisements,a=e.onMutateAdvertisement;return t.length>0?Object(j.jsx)(J,{children:t.map((function(e){return Object(j.jsx)(Z,{boatId:e._id,createdAt:e.hasAdvertisement.createdAt,images:e.hasAdvertisement.images,model:e.model,rentals:e.rentals,reviews:e.reviews,preferredBy:e.hasAdvertisement.preferredBy.length,onMutateAdvertisement:a},e._id)}))}):Object(j.jsx)(y.a,{warningText:"Non hai aggiunto nuovi annunci. Aggiungi la tua \ud83d\udee5 nella sezione barche e inizia una nuova esperienza",warningTextButton:"Aggiungi",path:"/become-shipowner"})},E=a(25),Q=a(9),K=a(82);t.default=function(){var e=Object(r.useContext)(Q.b).token,t=Object(E.a)(!0).sendRequest,a=Object(r.useState)([]),c=Object(n.a)(a,2),s=c[0],o=c[1],l=Object(r.useCallback)((function(a,n){return t({body:a,token:e},Object(d.m)(o,n))}),[t,e]);return Object(r.useEffect)((function(){t({body:M.body_shipownerAdvertisements,token:e},(function(e){return o(Object.values(Object(d.a)(e.advertisementsByShipowner,e.rentalsByShipowner)))}))}),[t,e]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(i.a,{backElement:Object(j.jsx)(K.a,{}),textTitle:"Annunci"}),Object(j.jsx)(q,{advertisements:s,onMutateAdvertisement:l})]})}},77:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(19);var i=a(14);function r(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=18.3d89a076.chunk.js.map