(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[20],{303:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n(0),c=n.n(o),a=n(2),u=n(25),i=n(11),l=n(9),s=n(69),d=n(73),b=n(18),f=n(1),j=c.a.lazy((function(){return n.e(19).then(n.bind(null,285))})),m=c.a.lazy((function(){return n.e(9).then(n.bind(null,297))})),O=c.a.lazy((function(){return Promise.all([n.e(2),n.e(13)]).then(n.bind(null,298))})),h=c.a.lazy((function(){return n.e(12).then(n.bind(null,296))}));t.default=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],p=Object(o.useRef)({email:"utente"}),x=Object(a.h)(),y=Object(u.a)(),v=y.status,_=y.error,w=y.data,M=y.sendRequest,k=Object(o.useContext)(l.b).token,g=Object(a.j)()["*"].split("/")[0],D=Object(o.useMemo)((function(){return n&&n.filter((function(e){return e._id===g}))[0]}),[n,g]);Object(o.useEffect)((function(){M({body:i.body_userBoats,token:k},(function(e){p.current=e.user,c(Object.values(Object(s.b)(e.boatsByUser,e.rentalsByShipowner)))}))}),[M,k]);var S=Object(o.useCallback)((function(e,t,n){return M({body:e,token:k},n?Object(s.m)(c,t,x,n):Object(s.m)(c,t))}),[M,k,x]);return Object(f.jsxs)(o.Suspense,{fallback:Object(f.jsx)(b.a,{}),children:["completed"===v&&w&&Object(f.jsx)(d.a,{title:"Problem",children:w}),"completed"===v&&_&&Object(f.jsx)(d.a,{title:"Error",children:_}),Object(f.jsxs)(a.e,{children:[Object(f.jsx)(a.c,{index:!0,element:Object(f.jsx)(j,{userName:p.current.email,userBoats:n,onMutationUserBoat:S})}),Object(f.jsx)(a.c,{path:"boat",element:Object(f.jsx)(m,{onMutationUserBoat:S})}),"completed"!==v||D?Object(f.jsxs)(a.c,{path:":boatId",children:[Object(f.jsx)(a.c,{path:"boat",element:Object(f.jsx)(m,{boat:D,onMutationUserBoat:S},D?D._id:void 0)}),Object(f.jsx)(a.c,{path:"location",element:Object(f.jsx)(O,{boat:D,onMutationUserBoat:S},D?D._id:void 0)}),Object(f.jsx)(a.c,{path:"advertisement",element:Object(f.jsx)(h,{onMutationUserBoat:S,boatId:g})}),Object(f.jsx)(a.c,{path:"*",element:Object(f.jsx)(a.a,{to:"/become-shipowner"})})]}):Object(f.jsx)(a.c,{path:"*",element:Object(f.jsx)(a.a,{replace:!0,to:"/become-shipowner"})})]})]})}},69:function(e,t,n){"use strict";n.d(t,"p",(function(){return a})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return i})),n.d(t,"k",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"j",(function(){return d})),n.d(t,"f",(function(){return b})),n.d(t,"o",(function(){return f})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"n",(function(){return x})),n.d(t,"m",(function(){return y})),n.d(t,"l",(function(){return v}));var r=n(7),o=n(77),c=void 0,a=function(e,t){var n=!1;return function(){n||(e.call(),n=!0,setTimeout((function(){n=!1}),t))}},u=function(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){e.apply(c,o)}),t)}},i=function(e,t,n){return n<t?e.slice(t).concat(e.slice(0,n+1)):e.slice(t,n+1)},l=function(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)},s=function(e){return new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().split("T")[0]},d=function(e,t){return new Date(e).toLocaleDateString("it-IT",t)},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e.slice().sort((function(e,t){return new Date(e.from)-new Date(t.from)})):e.slice().sort((function(e,t){return new Date(t.from)-new Date(e.from)}))},f=function(e,t){return t?Math.round((new Date(t)-new Date(e))/864e5):0},j=function(e){return e.reduce((function(e,t){return e+t.rating}),0)/e.length},m=function(e,t,n,r,o){return parseFloat(e)*f(n,r)+parseFloat(t)+function(e,t,n){return Math.max(0,f(e,n)-f(e,t))}(n,r,o)*(2*e)},O=function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t)).reduce((function(t,n,o){return o<e.length?t[n._id]=Object(r.a)(Object(r.a)({},n),{},{isRented:!1}):new Date(n.from)<=new Date&&t[n.boat._id]&&(t[n.boat._id].isRented=!0),t}),{})},h=function(e,t){return[].concat(Object(o.a)(e),Object(o.a)(t)).reduce((function(t,n,o){return o<e.length?t[n._id]=Object(r.a)(Object(r.a)({},n),{},{rentals:[]}):t[n.boat._id]&&t[n.boat._id].rentals.push(n),t}),{})},p=function(e){return Object.values(e[Object.keys(e)])},x=function(e){return e[Object.keys(e)]},y=function(e,t,n,r){return function(o){var c=p(o);return c[0]&&e(t?function(e){return t(e,c[0])}:c[0]),n&&n(r(c[0])),c[1]}},v=function(e){return e.substring(1)}},73:function(e,t,n){"use strict";var r=n(3),o=n(0),c=n(27),a=n.n(c),u=n(76),i=n.n(u),l=n(1),s=function(e){return Object(l.jsx)("div",{className:i.a.backdrop,onClick:e.onCancel})},d=function(e){var t=e.title,n=e.children,r=e.actions,c=e.onCancel,a=e.adapterSize,u=void 0===a?"desktop":a;return Object(o.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="unset"}}),[]),"smartphone"===u?Object(l.jsx)("div",{className:i.a["modal-fullscreen"],children:n}):Object(l.jsxs)("div",{className:i.a.modal,children:[Object(l.jsx)("header",{className:i.a["modal-header"],children:Object(l.jsx)("h1",{children:t})}),Object(l.jsx)("section",{className:i.a["modal-content"],children:n}),Object(l.jsxs)("footer",{children:[r,Object(l.jsx)("span",{onClick:c,className:i.a["modal-close"],children:"\xd7"})]})]})};t.a=function(e){var t=Object(o.useState)(!0),n=Object(r.a)(t,2),c=n[0],u=n[1],i=function(){u(!1)};return c?Object(l.jsxs)(l.Fragment,{children:[a.a.createPortal(Object(l.jsx)(s,{onCancel:e.closeModalHandler||i}),document.getElementById("backdrop-root")),a.a.createPortal(Object(l.jsx)(d,{title:e.title,children:e.children,adapterSize:e.adapterSize,onCancel:e.closeModalHandler||i}),document.getElementById("overlay-root"))]}):null}},76:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3iXHD","modal-fullscreen":"Modal_modal-fullscreen__12Zdf",modal:"Modal_modal__30MRu","slide-down":"Modal_slide-down__294fH","modal-header":"Modal_modal-header__22ZUr","modal-content":"Modal_modal-content__1hFZf","modal-close":"Modal_modal-close__2Adva"}},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(19);var o=n(14);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=20.24f0e92d.chunk.js.map